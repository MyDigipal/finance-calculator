<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulateur de Management SEO | MyDigipal</title>
  <meta name="description" content="Composez votre offre SEO sur-mesure avec MyDigipal. Calculateur interactif pour estimer votre accompagnement r√©f√©rencement.">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .fade-in { animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .disabled-section { opacity: 0.5; filter: grayscale(0.8); }
    .disabled-section .level-card { pointer-events: none; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-spin { animation: spin 1s linear infinite; }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    // Ic√¥nes SVG inline
    const CheckIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="20,6 9,17 4,12"></polyline>
      </svg>
    );

    const ChevronRightIcon = () => (
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="9,18 15,12 9,6"></polyline>
      </svg>
    );

    const ChevronDownIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="6,9 12,15 18,9"></polyline>
      </svg>
    );

    const SparklesIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3z"></path>
      </svg>
    );

    const InfoIcon = () => (
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
    );

    const MailIcon = () => (
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect x="2" y="4" width="20" height="16" rx="2"></rect>
        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
      </svg>
    );

    const ArrowRightIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12,5 19,12 12,19"></polyline>
      </svg>
    );

    const XIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );

    const LoaderIcon = () => (
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="animate-spin">
        <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
      </svg>
    );

    // Composant pour formater le contenu d√©taill√© (sans markdown brut)
    function FormattedContent({ content, variant = 'default' }) {
      const sections = content.sections || [];
      
      // Styles selon le variant (default = bleu/indigo, roi = vert)
      const styles = variant === 'roi' ? {
        intro: 'text-emerald-800',
        sectionTitle: 'font-semibold text-emerald-900 mb-2',
        item: 'text-emerald-800',
        bullet: 'text-emerald-500',
        conclusion: 'text-emerald-800 font-medium mt-4 pt-4 border-t border-emerald-200'
      } : {
        intro: 'text-indigo-800',
        sectionTitle: 'font-semibold text-indigo-900 mb-2',
        item: 'text-indigo-800',
        bullet: 'text-indigo-500',
        conclusion: 'text-indigo-800 font-medium mt-4 pt-4 border-t border-indigo-200'
      };
      
      return (
        <div className="space-y-4">
          {content.intro && (
            <p className={styles.intro}>{content.intro}</p>
          )}
          
          {sections.map((section, idx) => (
            <div key={idx}>
              <h5 className={styles.sectionTitle}>{section.title}</h5>
              <ul className="space-y-1">
                {section.items.map((item, i) => (
                  <li key={i} className={`flex items-start gap-2 text-sm ${styles.item}`}>
                    <span className={`${styles.bullet} mt-0.5`}>‚Ä¢</span>
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
          
          {content.conclusion && (
            <p className={styles.conclusion}>{content.conclusion}</p>
          )}
        </div>
      );
    }

    // Donn√©es des services avec descriptions d√©taill√©es structur√©es
    const services = [
      {
        id: 'audit',
        title: 'A. Audit SEO',
        description: 'La base de toute strat√©gie SEO efficace. Nous analysons votre site, votre march√© et vos concurrents pour identifier les opportunit√©s.',
        icon: 'üîç',
        isOneOff: true,
        detailedInfo: {
          title: 'Audit SEO - C\'est quoi exactement ?',
          content: {
            intro: 'Notre audit SEO comprend une analyse technique compl√®te de votre site et une √©tude des mots-cl√©s de votre secteur.',
            sections: [
              {
                title: 'Ce que nous analysons',
                items: [
                  'Vitesse de chargement (Core Web Vitals)',
                  'Structure des URLs et architecture du site',
                  'M√©tadonn√©es (titres, descriptions, balises H1-H6)',
                  'Maillage interne entre les pages',
                  'Compatibilit√© mobile et responsive design',
                  'Erreurs 404, redirections, liens cass√©s',
                  'Indexation et fichier sitemap.xml'
                ]
              },
              {
                title: 'Version Avanc√©e - En plus',
                items: [
                  '√âtude approfondie de vos concurrents',
                  'Analyse d\'un plus grand volume de mots-cl√©s',
                  'Plan d\'action prioris√© des corrections techniques',
                  'Roadmap des actions √† mener sur les prochains mois'
                ]
              }
            ],
            conclusion: 'Livrable : Rapport d\'audit complet avec recommandations actionnables.'
          }
        },
        roiInfo: {
          title: 'üìà Ce que √ßa vous apporte',
          content: {
            intro: 'L\'audit pose les fondations de votre strat√©gie. Sans lui, vous avancez √† l\'aveugle.',
            sections: [
              {
                title: 'ROI de la strat√©gie de mots-cl√©s',
                items: [
                  'Le SEO affiche le meilleur ROI tous canaux confondus : 1,389% (FirstPageSage 2025)',
                  'Le SEO convertit 3,5x mieux que le PPC dans la plupart des secteurs',
                  'Taux de conversion SEO : 3,2% vs 1,5% en publicit√© payante',
                  'Co√ªt d\'acquisition client organique : 660‚Ç¨ vs 1,185‚Ç¨ en paid'
                ]
              },
              {
                title: 'Pourquoi c\'est indispensable',
                items: [
                  'Identifier les "quick wins" : mots-cl√©s faciles √† gagner rapidement',
                  '√âviter d\'investir sur des mots-cl√©s trop concurrentiels',
                  'Comprendre ce que font vos concurrents (et faire mieux)',
                  'Avoir une feuille de route claire pour les mois √† venir'
                ]
              }
            ],
            conclusion: '‚Üí Sans audit, impossible de prioriser. Avec, vous savez exactement o√π mettre votre √©nergie.'
          }
        },
        levels: [
          { name: 'Basic', price: 300, features: ['Audit technique complet', '15-20 mots-cl√©s analys√©s', 'Recommandations g√©n√©rales'], recommended: 'Sites r√©cents ou petits budgets', color: 'blue' },
          { name: 'Avanc√©', price: 400, features: ['Audit approfondi', '√âtude des concurrents', '40+ mots-cl√©s analys√©s', 'Plan d\'action technique prioris√©'], recommended: 'Pour une vision strat√©gique compl√®te', color: 'indigo', popular: true }
        ]
      },
      {
        id: 'corrections',
        title: 'B. Corrections Techniques',
        description: 'Un site techniquement sain est la fondation d\'un bon r√©f√©rencement. Nous identifions et corrigeons les freins techniques.',
        icon: 'üîß',
        detailedInfo: {
          title: 'Corrections Techniques - C\'est quoi exactement ?',
          content: {
            intro: 'Un site techniquement sain est la fondation d\'un bon r√©f√©rencement. Nous utilisons des outils professionnels (Ahrefs, Screaming Frog) pour d√©tecter tous les probl√®mes.',
            sections: [
              {
                title: 'Types d\'erreurs d√©tect√©es',
                items: [
                  'Erreurs 404 et liens cass√©s',
                  'Probl√®mes de redirections (cha√Ænes, boucles)',
                  'Contenu dupliqu√©',
                  'Probl√®mes de canonicals',
                  'Erreurs de balisage Schema.org',
                  'Probl√®mes d\'indexation (noindex accidentels)',
                  'Vitesse de chargement lente'
                ]
              },
              {
                title: 'Nettoyage des backlinks toxiques',
                items: [
                  'Analyse de votre profil de liens',
                  'D√©saveu des backlinks spam via Google Search Console',
                  'Protection contre les p√©nalit√©s Google'
                ]
              }
            ],
            conclusion: 'Livrable : Rapport technique avec priorisation High/Medium/Low et guide d\'impl√©mentation.'
          }
        },
        roiInfo: {
          title: '‚ö° Ce que √ßa vous apporte',
          content: {
            intro: 'La vitesse et la sant√© technique de votre site impactent directement vos conversions et votre ranking.',
            sections: [
              {
                title: 'Impact de la vitesse sur vos conversions',
                items: [
                  'Un site qui charge en 1 seconde convertit 2,5x mieux qu\'un site qui charge en 5 secondes',
                  'Chaque seconde de d√©lai = -7% de conversions',
                  '53% des visiteurs mobiles quittent si chargement > 3 secondes',
                  'Vodafone : +8% de ventes avec 31% d\'am√©lioration du temps de chargement'
                ]
              },
              {
                title: 'Impact sur le r√©f√©rencement',
                items: [
                  'Sites conformes Core Web Vitals : -24% d\'abandon',
                  'Google p√©nalise les sites lents dans son algorithme',
                  'Les erreurs 404 et liens cass√©s nuisent √† l\'exploration par Google',
                  'Un site sain = meilleur crawl budget = plus de pages index√©es'
                ]
              }
            ],
            conclusion: '‚Üí Un site rapide et sans erreurs convertit mieux ET se positionne mieux. Double b√©n√©fice.'
          }
        },
        levels: [
          { name: 'Essentiel', price: 100, features: ['Liste des erreurs d√©tect√©es', 'Export brut des probl√®mes'], recommended: 'Vous avez un webmaster en interne', color: 'blue' },
          { name: 'Avanc√©', price: 250, features: ['D√©tection des erreurs', 'Explications d√©taill√©es', 'Recommandations actionnables'], recommended: 'Comprendre et prioriser', color: 'indigo', popular: true },
          { name: 'Premium', price: 500, priceNote: '400-600‚Ç¨*', features: ['D√©tection compl√®te', 'Impl√©mentation par MyDigipal', 'Suivi des corrections'], recommended: 'On s\'en occupe pour vous', color: 'purple', footnote: '* Prix variable selon la complexit√© de votre CMS' }
        ]
      },
      {
        id: 'strategie',
        title: 'C. Strat√©gie SEO Central',
        description: 'Le pilotage strat√©gique continu de votre SEO : identification des opportunit√©s, optimisation des pages existantes et analyse de la concurrence.',
        icon: 'üéØ',
        detailedInfo: {
          title: 'Strat√©gie SEO Central - C\'est quoi exactement ?',
          content: {
            intro: 'Un accompagnement strat√©gique continu pour piloter votre SEO de mani√®re proactive, sans les corrections techniques ni la cr√©ation d\'articles (trait√©s s√©par√©ment).',
            sections: [
              {
                title: 'Recherche de mots-cl√©s en continu',
                items: [
                  'Identification des nouvelles opportunit√©s de mots-cl√©s',
                  'Suivi des positions et performances',
                  'Analyse des volumes de recherche et tendances',
                  'D√©tection des quick wins'
                ]
              },
              {
                title: 'Optimisation des pages existantes',
                items: [
                  'Audit r√©gulier des pages centrales',
                  'Recommandations de contenu √† modifier',
                  'Optimisation des balises et structure',
                  'Am√©lioration du maillage interne'
                ]
              },
              {
                title: 'Veille concurrentielle',
                items: [
                  'Analyse des strat√©gies concurrentes',
                  'Identification du contenu qui performe chez eux',
                  'D√©tection des opportunit√©s de positionnement',
                  'Benchmark r√©gulier du secteur'
                ]
              }
            ],
            conclusion: 'Un pilotage strat√©gique qui vous permet de toujours avoir une longueur d\'avance.'
          }
        },
        roiInfo: {
          title: 'üéØ Ce que √ßa vous apporte',
          content: {
            intro: 'Le SEO g√©n√®re des leads de bien meilleure qualit√© que les autres canaux marketing.',
            sections: [
              {
                title: 'Qualit√© du trafic SEO vs autres canaux',
                items: [
                  'Les leads SEO ont un taux de closing de 14,6% contre 1,7% pour le marketing traditionnel',
                  '60% des marketeurs disent que le SEO g√©n√®re les leads de meilleure qualit√©',
                  '70% des marketeurs confirment que le SEO g√©n√®re plus de ventes que le PPC',
                  'ROI moyen du SEO : 748% tous secteurs confondus'
                ]
              },
              {
                title: 'Avantage de la strat√©gie continue',
                items: [
                  'Identifier les opportunit√©s AVANT vos concurrents',
                  'R√©agir aux changements d\'algorithme Google',
                  'Capitaliser sur les tendances de recherche √©mergentes',
                  'Optimiser en continu = effet boule de neige sur le trafic'
                ]
              }
            ],
            conclusion: '‚Üí Une strat√©gie pilot√©e = des d√©cisions bas√©es sur la data, pas sur l\'intuition.'
          }
        },
        levels: [
          { name: 'Essentiel', price: 200, features: ['5-10 pages suivies', 'Recherche mots-cl√©s mensuelle', 'Recommandations d\'optimisation'], recommended: 'Petits sites ou d√©marrage', color: 'blue' },
          { name: 'Avanc√©', price: 400, features: ['15-25 pages suivies', 'Recherche mots-cl√©s bi-mensuelle', 'Analyse concurrence trimestrielle', 'Plan d\'action prioris√©'], recommended: 'Sites en croissance', color: 'indigo', popular: true },
          { name: 'Premium', price: 600, features: ['40+ pages suivies', 'Veille mots-cl√©s continue', 'Analyse concurrence mensuelle', 'Analyse des tendances', 'Accompagnement strat√©gique d√©di√©'], recommended: 'Sites ambitieux ou concurrentiels', color: 'purple' }
        ]
      },
      {
        id: 'contenu',
        title: 'D. Contenu IA Optimis√©',
        description: 'Le contenu r√©gulier et de qualit√© est le carburant du SEO. Notre syst√®me IA vous permet de publier des articles optimis√©s √† grande √©chelle.',
        icon: '‚úçÔ∏è',
        hasAddon: true,
        detailedInfo: {
          title: 'Contenu IA Optimis√© - C\'est quoi exactement ?',
          content: {
            intro: 'La r√©gularit√© est cruciale : 2 articles/semaine = +68% de trafic organique apr√®s 6 mois (source: HubSpot 2024). Google favorise les sites actifs avec du contenu frais.',
            sections: [
              {
                title: 'Notre process de cr√©ation',
                items: [
                  'Identification des th√©matiques via analyse Ahrefs',
                  'Analyse des volumes de recherche et difficult√©',
                  'Structuration optimale (H1, H2, FAQ, tableaux)',
                  'R√©daction IA personnalis√©e √† votre ton',
                  'Relecture et validation humaine'
                ]
              },
              {
                title: 'Ce qui nous diff√©rencie',
                items: [
                  'Prompts personnalis√©s + relecture humaine',
                  'Densit√© naturelle de mots-cl√©s (1-2% max)',
                  'Minimum 1500 mots avec valeur ajout√©e',
                  'Monitoring performances + optimisations'
                ]
              },
              {
                title: 'Option Publication CMS (+100‚Ç¨/mois)',
                items: [
                  'Push automatique dans WordPress/Webflow',
                  'Articles en brouillon ou publi√©s directement',
                  'Gain de temps consid√©rable'
                ]
              }
            ],
            conclusion: 'Technologies : API Ahrefs, Claude Sonnet 4 / GPT-5, N8N automation, WordPress REST API'
          }
        },
        roiInfo: {
          title: 'üîó Ce que √ßa vous apporte',
          content: {
            intro: 'Le contenu est un investissement qui se valorise dans le temps. Contrairement √† la pub, il continue de g√©n√©rer du trafic sans budget additionnel.',
            sections: [
              {
                title: 'Impact du contenu sur votre visibilit√©',
                items: [
                  'Les pages en position #1 ont 3,8x plus de backlinks que les autres du top 10',
                  'R√©sultats visibles sous 3-6 mois en moyenne',
                  'Le contenu de qualit√© attire naturellement des liens',
                  '82% des gens ont une perception positive apr√®s lecture de contenu expert'
                ]
              },
              {
                title: 'Effet cumulatif du contenu',
                items: [
                  'Chaque article publi√© = un actif permanent',
                  'Les anciens articles continuent de g√©n√©rer du trafic',
                  '+68% de trafic organique avec 2 articles/semaine pendant 6 mois',
                  'Sans contenu r√©gulier, vous c√©dez du terrain √† vos concurrents'
                ]
              }
            ],
            conclusion: '‚Üí Le contenu SEO est un actif qui se valorise. La pub s\'arr√™te quand vous coupez le budget.'
          }
        },
        levels: [
          { name: '2 articles', price: 350, features: ['2 articles/mois', 'Optimis√©s SEO', 'Livr√©s en document'], recommended: 'D√©marrage ou budget limit√©', color: 'blue' },
          { name: '4 articles', price: 600, features: ['4 articles/mois', 'Optimis√©s SEO', 'Recherche mots-cl√©s incluse'], recommended: 'Croissance r√©guli√®re', color: 'indigo', popular: true },
          { name: '8 articles', price: 750, features: ['8 articles/mois', 'Optimis√©s SEO', 'Strat√©gie √©ditoriale compl√®te'], recommended: 'Dominer votre secteur', color: 'purple' }
        ]
      },
      {
        id: 'suivi',
        title: 'E. Suivi & Collaboration',
        description: 'Un accompagnement adapt√© √† vos besoins, du simple reporting mensuel √† un suivi rapproch√© avec r√©unions r√©guli√®res.',
        icon: 'ü§ù',
        detailedInfo: {
          title: 'Suivi & Collaboration - C\'est quoi exactement ?',
          content: {
            intro: 'Un accompagnement SEO efficace n√©cessite un suivi r√©gulier et une communication claire.',
            sections: [
              {
                title: 'Ce que comprend le reporting',
                items: [
                  '√âvolution du trafic organique',
                  'Positions des mots-cl√©s cibles',
                  'Nouveaux backlinks acquis',
                  'Erreurs techniques d√©tect√©es',
                  'Actions r√©alis√©es le mois pr√©c√©dent',
                  'Recommandations pour le mois suivant'
                ]
              },
              {
                title: 'Format des meetings',
                items: [
                  'Pr√©sentation des r√©sultats',
                  'Discussion des priorit√©s',
                  'Questions/r√©ponses',
                  'D√©finition des prochaines actions'
                ]
              },
              {
                title: 'Outils de collaboration',
                items: [
                  'Dashboard Looker Studio (optionnel)',
                  'Espace partag√© pour les livrables',
                  'Support email pour les questions urgentes'
                ]
              }
            ],
            conclusion: 'Notre engagement : Transparence totale sur les actions r√©alis√©es et les r√©sultats obtenus.'
          }
        },
        roiInfo: {
          title: 'üöÄ Ce que √ßa vous apporte',
          content: {
            intro: 'Au-del√† du ROI direct, le suivi r√©gulier garantit que votre investissement SEO porte ses fruits.',
            sections: [
              {
                title: 'B√©n√©fices du suivi r√©gulier',
                items: [
                  'R√©activit√© face aux probl√®mes (erreurs, p√©nalit√©s)',
                  'Ajustement de la strat√©gie selon les r√©sultats',
                  'Pas de mauvaise surprise : vous savez exactement o√π vous en √™tes',
                  'Alignement continu avec vos objectifs business'
                ]
              },
              {
                title: 'Impact business indirect',
                items: [
                  'Cr√©dibilit√© : vous comprenez ce qui est fait et pourquoi',
                  'Gain de temps : un interlocuteur d√©di√© qui conna√Æt votre dossier',
                  'Meilleure prise de d√©cision : bas√©e sur des donn√©es, pas des intuitions',
                  'Sans SEO actif, le budget pub peut augmenter de 400%'
                ]
              }
            ],
            conclusion: '‚Üí Le SEO sans suivi, c\'est comme un pilote sans tableau de bord. On avance, mais vers o√π ?'
          }
        },
        levels: [
          { name: 'Essentiel', price: 100, features: ['Reporting email mensuel', 'M√©triques cl√©s'], recommended: 'Autonome, peu de questions', color: 'blue' },
          { name: 'Avanc√©', price: 200, features: ['1 meeting tous les 2 mois', 'R√©cap + brief mensuel', 'Support email'], recommended: '√âchanges r√©guliers', color: 'indigo', popular: true },
          { name: 'Premium', price: 300, features: ['1 meeting/mois', 'Disponibilit√© email r√©active', 'Accompagnement strat√©gique'], recommended: 'Collaboration intensive', color: 'purple' }
        ]
      }
    ];

    const setupOptions = [
      { id: 'tracking', name: 'Tracking & Measurement Setup', description: 'GA4, GTM, conversions, Meta Pixel, Cookie Banner', price: 750 },
      { id: 'dashboard', name: 'Dashboard Looker Studio', description: 'Reporting visuel en temps r√©el', price: 500 }
    ];

    // Composant carte de niveau
    function LevelCard({ level, isSelected, onSelect, disabled, isOneOff }) {
      const colorStyles = {
        blue: { border: isSelected ? 'border-blue-500 ring-2 ring-blue-500 bg-blue-50' : 'border-blue-200 hover:border-blue-400', badge: 'bg-blue-100 text-blue-700' },
        indigo: { border: isSelected ? 'border-indigo-500 ring-2 ring-indigo-500 bg-indigo-50' : 'border-indigo-200 hover:border-indigo-400', badge: 'bg-indigo-100 text-indigo-700' },
        purple: { border: isSelected ? 'border-purple-500 ring-2 ring-purple-500 bg-purple-50' : 'border-purple-200 hover:border-purple-400', badge: 'bg-purple-100 text-purple-700' }
      };

      const styles = colorStyles[level.color];

      return (
        <div onClick={disabled ? undefined : onSelect} className={`level-card relative p-5 rounded-xl border-2 transition-all duration-200 ${disabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'} ${styles.border}`}>
          {level.popular && !disabled && (
            <span className="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-xs font-semibold rounded-full whitespace-nowrap">
              Populaire
            </span>
          )}
          
          <div className="flex items-center justify-between mb-3">
            <h4 className="font-semibold text-gray-900">{level.name}</h4>
            {isSelected && !disabled && (
              <div className={`w-6 h-6 rounded-full flex items-center justify-center ${styles.badge}`}>
                <CheckIcon />
              </div>
            )}
          </div>
          
          <div className="mb-4">
            <span className="text-2xl font-bold text-gray-900">{level.priceNote || `${level.price}‚Ç¨`}</span>
            <span className="text-gray-500 text-sm">{isOneOff ? ' (une fois)' : '/mois'}</span>
          </div>
          
          <ul className="space-y-2 mb-4">
            {level.features.map((feature, idx) => (
              <li key={idx} className="flex items-start gap-2 text-sm text-gray-600">
                <span className="text-green-500 mt-0.5 flex-shrink-0"><CheckIcon /></span>
                {feature}
              </li>
            ))}
          </ul>
          
          <div className={`text-xs px-3 py-2 rounded-lg ${styles.badge} inline-flex items-center gap-1`}>
            <span className="flex-shrink-0"><InfoIcon /></span>
            <span>{level.recommended}</span>
          </div>
          
          {level.footnote && (
            <p className="mt-3 text-xs text-gray-500 italic">{level.footnote}</p>
          )}
        </div>
      );
    }

    // Composant section service avec 3 boutons align√©s
    function ServiceSection({ service, selection, onSelect, onDisable, isDisabled, cmsAddon, onToggleCmsAddon }) {
      const [showDetails, setShowDetails] = useState(false);
      const [showRoi, setShowRoi] = useState(false);

      // Fermer l'autre quand on en ouvre un
      const toggleDetails = () => {
        setShowDetails(!showDetails);
        if (!showDetails) setShowRoi(false);
      };

      const toggleRoi = () => {
        setShowRoi(!showRoi);
        if (!showRoi) setShowDetails(false);
      };

      return (
        <div className={`bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6 fade-in ${isDisabled ? 'disabled-section' : ''}`}>
          {/* Header avec titre */}
          <div className="flex items-start justify-between mb-3">
            <div className="flex items-center gap-3">
              <span className="text-3xl">{service.icon}</span>
              <div>
                <h3 className="text-xl font-bold text-gray-900">{service.title}</h3>
                {service.isOneOff && (
                  <span className="text-xs px-2 py-1 bg-amber-100 text-amber-700 rounded-full font-medium">Prestation ponctuelle</span>
                )}
              </div>
            </div>
          </div>
          
          <p className="text-gray-600 mb-4">{service.description}</p>
          
          {/* 3 boutons align√©s */}
          <div className="flex flex-wrap items-center gap-2 mb-4">
            {/* Bouton C'est quoi exactement ? */}
            <button
              onClick={toggleDetails}
              className={`px-4 py-2 text-sm font-medium rounded-lg flex items-center gap-1 transition-colors ${
                showDetails 
                  ? 'bg-indigo-600 text-white' 
                  : 'bg-indigo-100 text-indigo-700 hover:bg-indigo-200'
              }`}
            >
              <span>C'est quoi exactement ?</span>
              <span className={`transform transition-transform ${showDetails ? 'rotate-180' : ''}`}>
                <ChevronDownIcon />
              </span>
            </button>
            
            {/* Bouton √áa m'apporte quoi ? */}
            <button
              onClick={toggleRoi}
              className={`px-4 py-2 text-sm font-medium rounded-lg flex items-center gap-1 transition-colors ${
                showRoi 
                  ? 'bg-emerald-600 text-white' 
                  : 'bg-emerald-100 text-emerald-700 hover:bg-emerald-200'
              }`}
            >
              <span>√áa m'apporte quoi ?</span>
              <span className={`transform transition-transform ${showRoi ? 'rotate-180' : ''}`}>
                <ChevronDownIcon />
              </span>
            </button>
            
            {/* Bouton Non merci */}
            <button
              onClick={() => onDisable(service.id)}
              className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${
                isDisabled 
                  ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' 
                  : 'bg-gray-100 text-gray-500 hover:bg-gray-200 hover:text-gray-700'
              }`}
            >
              {isDisabled ? (
                <>
                  <CheckIcon /> R√©activer
                </>
              ) : (
                <>
                  <XIcon /> Non merci
                </>
              )}
            </button>
          </div>
          
          {/* Section d√©tails "C'est quoi exactement ?" */}
          {showDetails && (
            <div className="mb-6 p-4 bg-indigo-50 rounded-xl border border-indigo-100 fade-in">
              <h4 className="font-semibold text-indigo-900 mb-3">{service.detailedInfo.title}</h4>
              <FormattedContent content={service.detailedInfo.content} variant="default" />
            </div>
          )}
          
          {/* Section ROI "√áa m'apporte quoi ?" */}
          {showRoi && (
            <div className="mb-6 p-4 bg-emerald-50 rounded-xl border border-emerald-100 fade-in">
              <h4 className="font-semibold text-emerald-900 mb-3">{service.roiInfo.title}</h4>
              <FormattedContent content={service.roiInfo.content} variant="roi" />
            </div>
          )}
          
          {/* Cartes des niveaux */}
          {!isDisabled && (
            <>
              <div className={`grid gap-4 ${service.levels.length === 2 ? 'md:grid-cols-2' : 'md:grid-cols-3'}`}>
                {service.levels.map((level, idx) => (
                  <LevelCard
                    key={idx}
                    level={level}
                    isSelected={selection === idx}
                    onSelect={() => onSelect(service.id, idx)}
                    disabled={isDisabled}
                    isOneOff={service.isOneOff}
                  />
                ))}
              </div>
              
              {/* Option CMS pour Contenu IA */}
              {service.hasAddon && selection !== null && (
                <div 
                  onClick={onToggleCmsAddon}
                  className={`mt-4 p-4 rounded-xl border-2 cursor-pointer transition-all ${
                    cmsAddon 
                      ? 'border-green-500 bg-green-50 ring-2 ring-green-500' 
                      : 'border-gray-200 hover:border-gray-300'
                  }`}
                >
                  <div className="flex items-center justify-between">
                    <div>
                      <h4 className="font-semibold text-gray-900 flex items-center gap-2">
                        üì§ Publication directe dans le CMS
                        <span className="text-sm font-normal text-green-600">+100‚Ç¨/mois</span>
                      </h4>
                      <p className="text-sm text-gray-600">Push automatique dans WordPress/Webflow (brouillon ou publi√©)</p>
                    </div>
                    <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${
                      cmsAddon ? 'bg-green-500 border-green-500 text-white' : 'border-gray-300'
                    }`}>
                      {cmsAddon && <CheckIcon />}
                    </div>
                  </div>
                </div>
              )}
              
              {selection === null && (
                <p className="mt-4 text-sm text-gray-400 text-center">
                  Cliquez sur un niveau pour l'ajouter √† votre devis
                </p>
              )}
            </>
          )}
          
          {/* Message quand d√©sactiv√© */}
          {isDisabled && (
            <div className="py-8 text-center">
              <p className="text-gray-500">Ce service n'est pas inclus dans votre devis</p>
              <p className="text-sm text-gray-400 mt-1">Cliquez sur "R√©activer" pour l'ajouter</p>
            </div>
          )}
        </div>
      );
    }

    // Composant principal
    function SEOCalculator() {
      const [selections, setSelections] = useState({ audit: null, corrections: null, strategie: null, contenu: null, suivi: null });
      const [disabledServices, setDisabledServices] = useState({ audit: false, corrections: false, strategie: false, contenu: false, suivi: false });
      const [cmsAddon, setCmsAddon] = useState(false);
      const [setupSelections, setSetupSelections] = useState({ tracking: false, dashboard: false });
      const [duration, setDuration] = useState(4);
      const [showResult, setShowResult] = useState(false);
      const [contactInfo, setContactInfo] = useState({ name: '', email: '', company: '' });
      const [formSubmitted, setFormSubmitted] = useState(false);
      const [isSubmitting, setIsSubmitting] = useState(false);

      const handleSelect = (serviceId, levelIdx) => {
        setSelections(prev => ({ ...prev, [serviceId]: prev[serviceId] === levelIdx ? null : levelIdx }));
        if (serviceId === 'contenu' && selections.contenu === levelIdx) {
          setCmsAddon(false);
        }
      };

      const handleDisable = (serviceId) => {
        setDisabledServices(prev => {
          const newDisabled = !prev[serviceId];
          if (newDisabled) {
            setSelections(prevSel => ({ ...prevSel, [serviceId]: null }));
            if (serviceId === 'contenu') {
              setCmsAddon(false);
            }
          }
          return { ...prev, [serviceId]: newDisabled };
        });
      };

      const toggleSetup = (id) => {
        setSetupSelections(prev => ({ ...prev, [id]: !prev[id] }));
      };

      const { monthlyTotal, oneOffTotal, setupTotal, selectedServices, selectedSetupServices, discount } = useMemo(() => {
        let monthly = 0;
        let oneOff = 0;
        let setup = 0;
        const selected = [];
        const selectedSetup = [];

        services.forEach(service => {
          const levelIdx = selections[service.id];
          const isDisabled = disabledServices[service.id];
          if (levelIdx !== null && !isDisabled) {
            const level = service.levels[levelIdx];
            
            if (service.isOneOff) {
              oneOff += level.price;
              selected.push({ 
                service: service.title, 
                level: level.name, 
                price: level.price, 
                features: level.features,
                isOneOff: true
              });
            } else {
              let servicePrice = level.price;
              if (service.id === 'contenu' && cmsAddon) {
                servicePrice += 100;
              }
              monthly += servicePrice;
              selected.push({ 
                service: service.title, 
                level: level.name, 
                price: level.price,
                cmsAddon: service.id === 'contenu' && cmsAddon ? 100 : 0,
                features: service.id === 'contenu' && cmsAddon 
                  ? [...level.features, 'Publication directe CMS'] 
                  : level.features,
                isOneOff: false
              });
            }
          }
        });

        setupOptions.forEach(opt => {
          if (setupSelections[opt.id]) {
            setup += opt.price;
            selectedSetup.push({
              service: 'F. Tracking et Reporting',
              name: opt.name,
              price: opt.price,
              isOneOff: true
            });
          }
        });

        const discountRate = duration === 6 ? 0.05 : 0;
        const discountAmount = monthly * duration * discountRate;

        return { monthlyTotal: monthly, oneOffTotal: oneOff, setupTotal: setup, selectedServices: selected, selectedSetupServices: selectedSetup, discount: discountAmount };
      }, [selections, setupSelections, duration, disabledServices, cmsAddon]);

      const totalServicesCount = selectedServices.length + selectedSetupServices.length;
      const totalSetup = oneOffTotal + setupTotal;
      const grandTotal = (monthlyTotal * duration) + oneOffTotal + setupTotal - discount;
      const effectiveMonthlyPrice = Math.round(grandTotal / duration);
      const hasSelections = totalServicesCount > 0;

      const handleSubmit = async (e) => {
        e.preventDefault();
        if (isSubmitting) return;
        setIsSubmitting(true);
        
        const payload = {
          name: contactInfo.name,
          email: contactInfo.email,
          company: contactInfo.company || '',
          servicesDetails: selectedServices.map(s => ({
            name: s.service,
            level: s.level,
            price: s.price,
            cmsAddon: s.cmsAddon || 0,
            totalPrice: s.price + (s.cmsAddon || 0),
            features: s.features,
            isOneOff: s.isOneOff
          })),
          setupDetails: {
            tracking: setupSelections.tracking ? { name: 'Tracking & Measurement Setup', price: 750 } : null,
            dashboard: setupSelections.dashboard ? { name: 'Dashboard Looker Studio', price: 500 } : null,
            total: setupTotal
          },
          duration: duration,
          monthlyServicesTotal: monthlyTotal,
          oneOffServicesTotal: oneOffTotal,
          setupTotal: setupTotal,
          discount: discount,
          grandTotal: grandTotal,
          monthlyPrice: effectiveMonthlyPrice
        };

        try {
          const response = await fetch('https://n8n.mydigipal.com/webhook/calculateur-seo', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          
          if (response.ok) {
            setFormSubmitted(true);
          } else {
            alert('Erreur lors de l\'envoi. Veuillez r√©essayer.');
            setIsSubmitting(false);
          }
        } catch (error) {
          console.error('Erreur:', error);
          alert('Erreur de connexion. Veuillez r√©essayer.');
          setIsSubmitting(false);
        }
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
          {/* Header */}
          <header className="bg-white border-b border-gray-100 sticky top-0 z-50">
            <div className="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <a href="https://www.mydigipal.com/fr" target="_blank" rel="noopener noreferrer">
                  <img src="https://cdn.prod.website-files.com/64ec8901e801c89308b10a5b/65f06634783f8c20e2918f0d_01_Main%20.svg" alt="MyDigipal" className="h-10 w-auto" />
                </a>
                <div className="border-l border-gray-200 pl-3">
                  <p className="text-sm font-medium text-gray-700">Simulateur de Management SEO</p>
                </div>
              </div>
              
              {hasSelections && (
                <div className="hidden md:flex items-center gap-4">
                  <div className="text-right">
                    <p className="text-sm text-gray-500">Estimation</p>
                    <p className="text-xl font-bold text-indigo-600">{effectiveMonthlyPrice}‚Ç¨/mois</p>
                  </div>
                  <button onClick={() => setShowResult(true)} className="px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition flex items-center gap-2">
                    Voir le r√©capitulatif <ArrowRightIcon />
                  </button>
                </div>
              )}
            </div>
          </header>

          <main className="max-w-6xl mx-auto px-4 py-8">
            {/* Intro */}
            <section className="text-center mb-12">
              <div className="inline-flex items-center gap-2 px-4 py-2 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium mb-4">
                <SparklesIcon /> Offre modulaire sur-mesure
              </div>
              <h2 className="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Composez votre offre SEO</h2>
              <p className="text-lg text-gray-600 max-w-2xl mx-auto">
                S√©lectionnez le niveau adapt√© pour chaque service ou cliquez sur "Non merci" pour les modules qui ne vous int√©ressent pas.
              </p>
            </section>

            {/* Services */}
            {services.map(service => (
              <ServiceSection 
                key={service.id} 
                service={service} 
                selection={selections[service.id]} 
                onSelect={handleSelect}
                onDisable={handleDisable}
                isDisabled={disabledServices[service.id]}
                cmsAddon={service.id === 'contenu' ? cmsAddon : false}
                onToggleCmsAddon={() => setCmsAddon(prev => !prev)}
              />
            ))}

            {/* F. Tracking et Reporting */}
            <div className="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6 fade-in">
              <div className="flex items-center gap-3 mb-3">
                <span className="text-3xl">üìä</span>
                <div>
                  <h3 className="text-xl font-bold text-gray-900">F. Tracking et Reporting</h3>
                  <span className="text-xs px-2 py-1 bg-amber-100 text-amber-700 rounded-full font-medium">Prestation ponctuelle</span>
                </div>
              </div>
              <p className="text-gray-600 mb-6">Des prestations ponctuelles pour poser les fondations de votre tracking et visualiser vos performances.</p>
              
              <div className="grid md:grid-cols-2 gap-4">
                {setupOptions.map(opt => (
                  <div key={opt.id} onClick={() => toggleSetup(opt.id)} className={`p-4 rounded-xl border-2 cursor-pointer transition-all ${setupSelections[opt.id] ? 'border-green-500 bg-green-50 ring-2 ring-green-500' : 'border-gray-200 hover:border-gray-300'}`}>
                    <div className="flex items-center justify-between mb-2">
                      <h4 className="font-semibold text-gray-900">{opt.name}</h4>
                      <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${setupSelections[opt.id] ? 'bg-green-500 border-green-500 text-white' : 'border-gray-300'}`}>
                        {setupSelections[opt.id] && <CheckIcon />}
                      </div>
                    </div>
                    <p className="text-sm text-gray-600 mb-2">{opt.description}</p>
                    <p className="text-lg font-bold text-gray-900">{opt.price}‚Ç¨ <span className="text-sm font-normal text-gray-500">(une fois)</span></p>
                  </div>
                ))}
              </div>
            </div>

            {/* Duration */}
            <div className="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6 fade-in">
              <div className="flex items-center gap-3 mb-3">
                <span className="text-3xl">üìÖ</span>
                <h3 className="text-xl font-bold text-gray-900">Dur√©e d'engagement</h3>
              </div>
              
              <div className="grid md:grid-cols-2 gap-4">
                {[4, 6].map(d => (
                  <div key={d} onClick={() => setDuration(d)} className={`p-4 rounded-xl border-2 cursor-pointer transition-all ${duration === d ? 'border-indigo-500 bg-indigo-50 ring-2 ring-indigo-500' : 'border-gray-200 hover:border-gray-300'}`}>
                    <div className="flex items-center justify-between">
                      <div>
                        <h4 className="font-semibold text-gray-900">{d} mois</h4>
                        <p className="text-sm text-gray-600">{d === 4 ? 'Engagement minimum' : '5% de remise sur les services mensuels'}</p>
                      </div>
                      <div className="flex items-center gap-2">
                        {d === 6 && <span className="px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full">-5%</span>}
                        {duration === d && <div className="w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center text-white"><CheckIcon /></div>}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Mobile Summary Bar */}
            {hasSelections && (
              <div className="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg z-40">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-gray-500">Estimation</p>
                    <p className="text-xl font-bold text-indigo-600">{effectiveMonthlyPrice}‚Ç¨/mois</p>
                  </div>
                  <button onClick={() => setShowResult(true)} className="px-4 py-3 bg-indigo-600 text-white rounded-lg font-medium">
                    Voir le r√©capitulatif
                  </button>
                </div>
              </div>
            )}

            {/* Desktop Summary */}
            {hasSelections && (
              <div className="hidden md:block bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 text-white fade-in">
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="text-xl font-bold mb-1">Votre estimation</h3>
                    <p className="text-indigo-200">{totalServicesCount} service{totalServicesCount > 1 ? 's' : ''} s√©lectionn√©{totalServicesCount > 1 ? 's' : ''}</p>
                  </div>
                  
                  <div className="text-right">
                    <p className="text-3xl font-bold">
                      {effectiveMonthlyPrice}‚Ç¨/mois
                    </p>
                    <p className="text-indigo-200">pendant {duration} mois</p>
                    {discount > 0 && <p className="text-green-300 text-sm">Remise 6 mois incluse (-{discount.toLocaleString()}‚Ç¨)</p>}
                  </div>
                  
                  <button onClick={() => setShowResult(true)} className="px-6 py-3 bg-white text-indigo-600 rounded-xl font-semibold hover:bg-indigo-50 transition flex items-center gap-2">
                    Voir le d√©tail <ChevronRightIcon />
                  </button>
                </div>
              </div>
            )}
          </main>

          {/* Modal R√©capitulatif */}
          {showResult && (
            <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto">
              <div className="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto fade-in">
                <div className="sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between">
                  <h3 className="text-xl font-bold text-gray-900">Votre devis personnalis√©</h3>
                  <button onClick={() => setShowResult(false)} className="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
                </div>
                
                <div className="p-6">
                  {totalServicesCount === 0 ? (
                    <p className="text-gray-500 text-center py-8">Aucun service s√©lectionn√©.</p>
                  ) : (
                    <>
                      {/* Services s√©lectionn√©s */}
                      <div className="space-y-4 mb-6">
                        {selectedServices.map((item, idx) => (
                          <div key={idx} className={`p-4 rounded-xl ${item.isOneOff ? 'bg-amber-50' : 'bg-gray-50'}`}>
                            <div className="flex items-center justify-between mb-2">
                              <div>
                                <h4 className="font-semibold text-gray-900">{item.service}</h4>
                                <span className="text-sm text-indigo-600 font-medium">
                                  {item.level}
                                  {item.isOneOff && <span className="ml-2 text-amber-600">(ponctuel)</span>}
                                </span>
                              </div>
                              <div className="text-right">
                                <span className="text-lg font-bold text-gray-900">
                                  {item.price + (item.cmsAddon || 0)}‚Ç¨
                                  {!item.isOneOff && <span className="text-sm font-normal text-gray-500">/mois</span>}
                                </span>
                                {item.cmsAddon > 0 && (
                                  <p className="text-xs text-green-600">dont +100‚Ç¨ CMS</p>
                                )}
                              </div>
                            </div>
                            <ul className="text-sm text-gray-600">
                              {item.features.map((f, i) => (
                                <li key={i} className="flex items-center gap-2">
                                  <span className="text-green-500"><CheckIcon /></span> {f}
                                </li>
                              ))}
                            </ul>
                          </div>
                        ))}
                        
                        {/* F. Tracking et Reporting */}
                        {(setupSelections.tracking || setupSelections.dashboard) && (
                          <div className="p-4 bg-amber-50 rounded-xl">
                            <h4 className="font-semibold text-gray-900 mb-2">F. Tracking et Reporting <span className="text-amber-600 text-sm font-normal">(ponctuel)</span></h4>
                            {setupSelections.tracking && <div className="flex justify-between text-sm"><span>Tracking & Measurement Setup</span><span className="font-medium">750‚Ç¨</span></div>}
                            {setupSelections.dashboard && <div className="flex justify-between text-sm"><span>Dashboard Looker Studio</span><span className="font-medium">500‚Ç¨</span></div>}
                          </div>
                        )}
                      </div>

                      {/* R√©cap financier simplifi√© */}
                      <div className="border-t border-gray-200 pt-4 mb-6">
                        <div className="flex justify-between mb-2">
                          <span className="text-gray-600">Dur√©e d'engagement</span>
                          <span className="font-semibold">{duration} mois</span>
                        </div>
                        {totalSetup > 0 && (
                          <div className="flex justify-between mb-2">
                            <span className="text-gray-600">Setup</span>
                            <span className="font-semibold">{totalSetup.toLocaleString()}‚Ç¨</span>
                          </div>
                        )}
                        {monthlyTotal > 0 && (
                          <div className="flex justify-between mb-2">
                            <span className="text-gray-600">Prestations mensuelles</span>
                            <span className="font-semibold">{monthlyTotal}‚Ç¨/mois</span>
                          </div>
                        )}
                        {discount > 0 && (
                          <div className="flex justify-between mb-2 text-green-600">
                            <span>Remise engagement 6 mois (-5%)</span>
                            <span className="font-semibold">-{discount.toLocaleString()}‚Ç¨</span>
                          </div>
                        )}
                        <div className="bg-indigo-50 rounded-xl p-4 mt-4">
                          <div className="flex justify-between items-center">
                            <span className="text-lg font-bold text-gray-900">Total</span>
                            <div className="text-right">
                              <span className="text-2xl font-bold text-indigo-600">{effectiveMonthlyPrice}‚Ç¨/mois</span>
                              <p className="text-sm text-gray-600">pendant {duration} mois</p>
                            </div>
                          </div>
                        </div>
                      </div>

                      {/* Les + MyDigipal */}
                      <div className="bg-indigo-50 rounded-xl p-4 mb-6">
                        <h4 className="font-semibold text-indigo-900 mb-2 flex items-center gap-2"><SparklesIcon /> Inclus dans tous nos services</h4>
                        <ul className="text-sm text-indigo-800 space-y-1">
                          <li>‚úì Optimisation LLM (ChatGPT, Perplexity, Copilot)</li>
                          <li>‚úì Outils premium (Ahrefs, Search Console)</li>
                          <li>‚úì Approche 100% data-driven</li>
                          <li>‚úì Transparence totale sur les actions</li>
                        </ul>
                      </div>

                      {/* Contact Form */}
                      <div className="border-t border-gray-200 pt-6">
                        {formSubmitted ? (
                          <div className="text-center py-8">
                            <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                              <span className="text-green-500 text-2xl">‚úì</span>
                            </div>
                            <h4 className="text-xl font-bold text-gray-900 mb-2">Merci !</h4>
                            <p className="text-gray-600">Nous vous recontacterons sous 24h.</p>
                          </div>
                        ) : (
                          <>
                            <h4 className="font-semibold text-gray-900 mb-4">Recevoir ce devis par email</h4>
                            <form onSubmit={handleSubmit} className="space-y-3">
                              <input type="text" placeholder="Votre nom" value={contactInfo.name} onChange={(e) => setContactInfo(prev => ({ ...prev, name: e.target.value }))} required disabled={isSubmitting} className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none disabled:bg-gray-100 disabled:cursor-not-allowed" />
                              <input type="email" placeholder="Votre email" value={contactInfo.email} onChange={(e) => setContactInfo(prev => ({ ...prev, email: e.target.value }))} required disabled={isSubmitting} className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none disabled:bg-gray-100 disabled:cursor-not-allowed" />
                              <input type="text" placeholder="Votre entreprise (optionnel)" value={contactInfo.company} onChange={(e) => setContactInfo(prev => ({ ...prev, company: e.target.value }))} disabled={isSubmitting} className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none disabled:bg-gray-100 disabled:cursor-not-allowed" />
                              <button type="submit" disabled={isSubmitting} className="w-full px-4 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center gap-2 disabled:bg-indigo-400 disabled:cursor-not-allowed">
                                {isSubmitting ? (
                                  <>
                                    <LoaderIcon /> Envoi en cours...
                                  </>
                                ) : (
                                  <>
                                    <MailIcon /> Envoyer le devis
                                  </>
                                )}
                              </button>
                            </form>
                            <p className="text-xs text-gray-500 mt-3 text-center">Nous vous recontacterons sous 24h.</p>
                          </>
                        )}
                      </div>
                    </>
                  )}
                </div>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer className="bg-white border-t border-gray-100 py-8 mt-12 mb-20 md:mb-0">
            <div className="max-w-6xl mx-auto px-4 text-center">
              <p className="text-gray-600 mb-2">Des questions ?</p>
              <a href="mailto:paul@mydigipal.com" className="text-indigo-600 font-semibold hover:underline">paul@mydigipal.com</a>
              <p className="mt-4">
                <a href="https://www.mydigipal.com/fr" target="_blank" rel="noopener noreferrer" className="text-gray-500 hover:text-indigo-600 text-sm">www.mydigipal.com</a>
              </p>
            </div>
          </footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<SEOCalculator />);
  </script>
</body>
</html>
