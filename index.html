<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulateur de Management SEO | MyDigipal</title>
  <meta name="description" content="Composez votre offre SEO sur-mesure avec MyDigipal. Calculateur interactif pour estimer votre accompagnement r√©f√©rencement.">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .fade-in { animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .disabled-section { opacity: 0.5; filter: grayscale(0.8); }
    .disabled-section .level-card { pointer-events: none; }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    // Ic√¥nes SVG inline
    const CheckIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="20,6 9,17 4,12"></polyline>
      </svg>
    );

    const ChevronRightIcon = () => (
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="9,18 15,12 9,6"></polyline>
      </svg>
    );

    const ChevronDownIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="6,9 12,15 18,9"></polyline>
      </svg>
    );

    const SparklesIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3z"></path>
      </svg>
    );

    const CalculatorIcon = () => (
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect x="4" y="2" width="16" height="20" rx="2"></rect>
        <line x1="8" y1="6" x2="16" y2="6"></line>
        <line x1="8" y1="10" x2="8" y2="10.01"></line>
        <line x1="12" y1="10" x2="12" y2="10.01"></line>
        <line x1="16" y1="10" x2="16" y2="10.01"></line>
        <line x1="8" y1="14" x2="8" y2="14.01"></line>
        <line x1="12" y1="14" x2="12" y2="14.01"></line>
        <line x1="16" y1="14" x2="16" y2="14.01"></line>
        <line x1="8" y1="18" x2="8" y2="18.01"></line>
        <line x1="12" y1="18" x2="12" y2="18.01"></line>
        <line x1="16" y1="18" x2="16" y2="18.01"></line>
      </svg>
    );

    const InfoIcon = () => (
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
    );

    const MailIcon = () => (
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect x="2" y="4" width="20" height="16" rx="2"></rect>
        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
      </svg>
    );

    const ArrowRightIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12,5 19,12 12,19"></polyline>
      </svg>
    );

    const XIcon = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );

    // Donn√©es des services avec descriptions d√©taill√©es
    const services = [
      {
        id: 'audit',
        title: 'A. Audit & Strat√©gie SEO',
        description: 'La base de toute strat√©gie SEO efficace. Nous analysons votre site, votre march√© et vos concurrents pour d√©finir un plan d\'action adapt√© √† vos objectifs.',
        icon: 'üîç',
        detailedInfo: {
          title: 'Audit & Strat√©gie SEO - En d√©tail',
          content: `Notre audit SEO comprend une analyse technique compl√®te de votre site, une √©tude approfondie des mots-cl√©s de votre secteur, et un benchmark de vos concurrents.

**Ce que nous analysons :**
‚Ä¢ Vitesse de chargement (Core Web Vitals)
‚Ä¢ Structure des URLs et architecture du site
‚Ä¢ M√©tadonn√©es (titres, descriptions, balises H1-H6)
‚Ä¢ Maillage interne entre les pages
‚Ä¢ Compatibilit√© mobile et responsive design
‚Ä¢ Erreurs 404, redirections, liens cass√©s
‚Ä¢ Indexation et fichier sitemap.xml

**Strat√©gie de Mots-Cl√©s :**
Nous organisons les mots-cl√©s en clusters th√©matiques pour √©viter la cannibalisation SEO et concentrer les efforts de fa√ßon strat√©gique.

**Livrable :** Roadmap SEO personnalis√©e avec priorisation des actions et KPIs de suivi.`
        },
        levels: [
          { name: 'Essentiel', price: 200, features: ['Audit technique basique', '10-15 mots-cl√©s principaux', 'Recommandations g√©n√©rales'], recommended: 'Sites r√©cents ou petits budgets', color: 'blue' },
          { name: 'Avanc√©', price: 350, features: ['Audit approfondi', 'Clusters th√©matiques', 'Priorisation des actions', 'Roadmap trimestrielle'], recommended: 'Sites √©tablis cherchant √† cro√Ætre', color: 'indigo', popular: true },
          { name: 'Premium', price: 500, features: ['Audit complet', 'Benchmark concurrence', 'Strat√©gie 6 mois', 'R√©visions mensuelles'], recommended: 'March√©s concurrentiels', color: 'purple' }
        ]
      },
      {
        id: 'corrections',
        title: 'B. Corrections Techniques',
        description: 'Un site techniquement sain est la fondation d\'un bon r√©f√©rencement. Nous identifions et corrigeons les freins techniques.',
        icon: 'üîß',
        detailedInfo: {
          title: 'Corrections Techniques - En d√©tail',
          content: `Un site techniquement sain est la fondation d'un bon r√©f√©rencement. Nous utilisons des outils professionnels (Ahrefs, Screaming Frog) pour d√©tecter tous les probl√®mes.

**Types d'erreurs d√©tect√©es :**
‚Ä¢ Erreurs 404 et liens cass√©s
‚Ä¢ Probl√®mes de redirections (cha√Ænes, boucles)
‚Ä¢ Contenu dupliqu√©
‚Ä¢ Probl√®mes de canonicals
‚Ä¢ Erreurs de balisage Schema.org
‚Ä¢ Probl√®mes d'indexation (noindex accidentels)
‚Ä¢ Vitesse de chargement lente

**Nettoyage des backlinks toxiques :**
Nous analysons votre profil de liens et d√©savouons les backlinks spam via Google Search Console pour √©viter les p√©nalit√©s.

**Livrable :** Rapport technique avec priorisation High/Medium/Low et guide d'impl√©mentation.`
        },
        levels: [
          { name: 'Essentiel', price: 100, features: ['Liste des erreurs d√©tect√©es', 'Export brut des probl√®mes'], recommended: 'Webmaster en interne', color: 'blue' },
          { name: 'Avanc√©', price: 250, features: ['D√©tection des erreurs', 'Explications d√©taill√©es', 'Recommandations actionnables'], recommended: 'Comprendre et prioriser', color: 'indigo', popular: true },
          { name: 'Premium', price: 500, priceNote: '400-600‚Ç¨', features: ['D√©tection compl√®te', 'Impl√©mentation par MyDigipal', 'Suivi des corrections'], recommended: 'On s\'en occupe pour vous', color: 'purple' }
        ]
      },
      {
        id: 'pages',
        title: 'C. Optimisation Pages Centrales',
        description: 'Vos pages cl√©s m√©ritent une attention particuli√®re. Nous optimisons leur structure et leur contenu pour maximiser leur visibilit√©.',
        icon: 'üìÑ',
        detailedInfo: {
          title: 'Optimisation Pages Centrales - En d√©tail',
          content: `Vos pages cl√©s (accueil, services, produits phares) sont les piliers de votre visibilit√©. Chaque page doit cibler un mot-cl√© principal et son champ s√©mantique.

**Ce que nous optimisons :**
‚Ä¢ Balise Title (< 60 caract√®res, mot-cl√© au d√©but)
‚Ä¢ Meta Description (< 160 caract√®res, incitation au clic)
‚Ä¢ Structure H1 / H2 / H3 hi√©rarchique
‚Ä¢ Densit√© et placement des mots-cl√©s
‚Ä¢ Contenu enrichi (listes, tableaux, FAQ)
‚Ä¢ Images (alt text, compression, format WebP)
‚Ä¢ Liens internes contextuels

**Maillage interne :**
Nous cr√©ons une architecture de liens internes coh√©rente pour distribuer le "jus SEO" vers vos pages prioritaires.

**Livrable :** Pages optimis√©es pr√™tes √† publier ou guidelines d√©taill√©es pour votre √©quipe.`
        },
        levels: [
          { name: 'Essentiel', price: 200, features: ['Guidelines d\'optimisation', 'Titres & m√©tas', 'Structure H1/H2'], recommended: 'R√©daction en interne', color: 'blue' },
          { name: 'Avanc√©', price: 400, features: ['Guidelines compl√®tes', 'R√©√©criture des √©l√©ments cl√©s', 'Optimisation des balises'], recommended: 'Cl√© en main partiel', color: 'indigo', popular: true },
          { name: 'Premium', price: 500, features: ['R√©√©criture compl√®te des pages', 'Maillage interne optimis√©', 'Strat√©gie de contenu'], recommended: 'Refonte compl√®te', color: 'purple' }
        ]
      },
      {
        id: 'contenu',
        title: 'D. Contenu IA Optimis√©',
        description: 'Le contenu r√©gulier et de qualit√© est le carburant du SEO. Notre syst√®me IA vous permet de publier des articles optimis√©s.',
        icon: '‚úçÔ∏è',
        detailedInfo: {
          title: 'Contenu IA Optimis√© - En d√©tail',
          content: `La r√©gularit√© est cruciale : 2 articles/semaine = +68% de trafic organique apr√®s 6 mois (source: HubSpot 2024). Google favorise les sites actifs avec du contenu frais.

**Notre Process de Cr√©ation :**
1. Identification des th√©matiques via analyse Ahrefs
2. Analyse des volumes de recherche et difficult√©
3. Structuration optimale (H1, H2, FAQ, tableaux)
4. R√©daction IA personnalis√©e √† votre ton
5. Publication (draft ou directe selon formule)

**Ce qui nous diff√©rencie :**
‚Ä¢ Prompts personnalis√©s + relecture humaine
‚Ä¢ Densit√© naturelle de mots-cl√©s (1-2% max)
‚Ä¢ Minimum 1500 mots avec valeur ajout√©e
‚Ä¢ Monitoring performances + optimisations

**Technologies utilis√©es :**
API Ahrefs, Claude Sonnet 4 / GPT-5, N8N automation, WordPress REST API

**ROI attendu (base 2 articles/semaine) :**
‚Ä¢ Mois 1-2 : +50-100 visiteurs/mois
‚Ä¢ Mois 3-4 : +200-400 visiteurs/mois
‚Ä¢ Mois 5-6 : +500-1000 visiteurs/mois`
        },
        levels: [
          { name: 'Essentiel', price: 350, features: ['2 articles/mois', 'Livr√©s en document', 'Optimis√©s SEO'], recommended: 'D√©marrage ou budget limit√©', color: 'blue' },
          { name: 'Avanc√©', price: 500, features: ['4 articles/mois', 'Push WordPress brouillon', 'Recherche mots-cl√©s incluse'], recommended: 'Croissance r√©guli√®re', color: 'indigo', popular: true },
          { name: 'Premium', price: 650, features: ['8 articles/mois', 'Publication directe', 'Optimisation continue'], recommended: 'Dominer votre secteur', color: 'purple' }
        ]
      },
      {
        id: 'suivi',
        title: 'E. Suivi & Collaboration',
        description: 'Un accompagnement adapt√© √† vos besoins, du simple reporting mensuel √† un suivi rapproch√© avec r√©unions r√©guli√®res.',
        icon: 'ü§ù',
        detailedInfo: {
          title: 'Suivi & Collaboration - En d√©tail',
          content: `Un accompagnement SEO efficace n√©cessite un suivi r√©gulier et une communication claire.

**Ce que comprend le reporting :**
‚Ä¢ √âvolution du trafic organique
‚Ä¢ Positions des mots-cl√©s cibles
‚Ä¢ Nouveaux backlinks acquis
‚Ä¢ Erreurs techniques d√©tect√©es
‚Ä¢ Actions r√©alis√©es le mois pr√©c√©dent
‚Ä¢ Recommandations pour le mois suivant

**Format des meetings :**
‚Ä¢ Pr√©sentation des r√©sultats
‚Ä¢ Discussion des priorit√©s
‚Ä¢ Questions/r√©ponses
‚Ä¢ D√©finition des prochaines actions

**Outils de collaboration :**
‚Ä¢ Dashboard Looker Studio (optionnel)
‚Ä¢ Espace partag√© pour les livrables
‚Ä¢ Support email pour les questions urgentes

**Notre engagement :** Transparence totale sur les actions r√©alis√©es et les r√©sultats obtenus.`
        },
        levels: [
          { name: 'Essentiel', price: 100, features: ['Reporting email mensuel', 'M√©triques cl√©s'], recommended: 'Autonome, peu de questions', color: 'blue' },
          { name: 'Avanc√©', price: 200, features: ['1 meeting/mois', 'R√©cap + brief mensuel', 'Support email'], recommended: '√âchanges r√©guliers', color: 'indigo', popular: true },
          { name: 'Premium', price: 300, features: ['2 meetings/mois', 'Disponibilit√© email r√©active', 'Accompagnement strat√©gique'], recommended: 'Collaboration intensive', color: 'purple' }
        ]
      }
    ];

    const setupOptions = [
      { id: 'tracking', name: 'Tracking & Measurement Setup', description: 'GA4, GTM, conversions, Meta Pixel, Cookie Banner', price: 750 },
      { id: 'dashboard', name: 'Dashboard Looker Studio', description: 'Reporting visuel en temps r√©el', price: 500 }
    ];

    // Composant carte de niveau
    function LevelCard({ level, isSelected, onSelect, disabled }) {
      const colorStyles = {
        blue: { border: isSelected ? 'border-blue-500 ring-2 ring-blue-500 bg-blue-50' : 'border-blue-200 hover:border-blue-400', badge: 'bg-blue-100 text-blue-700' },
        indigo: { border: isSelected ? 'border-indigo-500 ring-2 ring-indigo-500 bg-indigo-50' : 'border-indigo-200 hover:border-indigo-400', badge: 'bg-indigo-100 text-indigo-700' },
        purple: { border: isSelected ? 'border-purple-500 ring-2 ring-purple-500 bg-purple-50' : 'border-purple-200 hover:border-purple-400', badge: 'bg-purple-100 text-purple-700' }
      };

      const styles = colorStyles[level.color];

      return (
        <div onClick={disabled ? undefined : onSelect} className={`level-card relative p-5 rounded-xl border-2 transition-all duration-200 ${disabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'} ${styles.border}`}>
          {level.popular && !disabled && (
            <span className="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-xs font-semibold rounded-full whitespace-nowrap">
              Populaire
            </span>
          )}
          
          <div className="flex items-center justify-between mb-3">
            <h4 className="font-semibold text-gray-900">{level.name}</h4>
            {isSelected && !disabled && (
              <div className={`w-6 h-6 rounded-full flex items-center justify-center ${styles.badge}`}>
                <CheckIcon />
              </div>
            )}
          </div>
          
          <div className="mb-4">
            <span className="text-2xl font-bold text-gray-900">{level.priceNote || `${level.price}‚Ç¨`}</span>
            <span className="text-gray-500 text-sm">/mois</span>
          </div>
          
          <ul className="space-y-2 mb-4">
            {level.features.map((feature, idx) => (
              <li key={idx} className="flex items-start gap-2 text-sm text-gray-600">
                <span className="text-green-500 mt-0.5 flex-shrink-0"><CheckIcon /></span>
                {feature}
              </li>
            ))}
          </ul>
          
          <div className={`text-xs px-3 py-2 rounded-lg ${styles.badge} inline-flex items-center gap-1`}>
            <span className="flex-shrink-0"><InfoIcon /></span>
            <span>{level.recommended}</span>
          </div>
        </div>
      );
    }

    // Composant section service avec "Non merci" et "En savoir plus"
    function ServiceSection({ service, selection, onSelect, onDisable, isDisabled }) {
      const [showDetails, setShowDetails] = useState(false);

      return (
        <div className={`bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6 fade-in ${isDisabled ? 'disabled-section' : ''}`}>
          {/* Header avec titre et bouton Non merci */}
          <div className="flex items-start justify-between mb-3">
            <div className="flex items-center gap-3">
              <span className="text-3xl">{service.icon}</span>
              <h3 className="text-xl font-bold text-gray-900">{service.title}</h3>
            </div>
            
            {/* Bouton Non merci */}
            <button
              onClick={() => onDisable(service.id)}
              className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${
                isDisabled 
                  ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' 
                  : 'bg-gray-100 text-gray-500 hover:bg-gray-200 hover:text-gray-700'
              }`}
            >
              {isDisabled ? (
                <>
                  <CheckIcon /> R√©activer
                </>
              ) : (
                <>
                  <XIcon /> Non merci
                </>
              )}
            </button>
          </div>
          
          <p className="text-gray-600 mb-4">{service.description}</p>
          
          {/* Bouton En savoir plus */}
          <button
            onClick={() => setShowDetails(!showDetails)}
            className="mb-4 text-indigo-600 text-sm font-medium flex items-center gap-1 hover:text-indigo-700 transition-colors"
          >
            <span>{showDetails ? 'Masquer les d√©tails' : 'En savoir plus'}</span>
            <span className={`transform transition-transform ${showDetails ? 'rotate-180' : ''}`}>
              <ChevronDownIcon />
            </span>
          </button>
          
          {/* Section d√©tails expandable */}
          {showDetails && (
            <div className="mb-6 p-4 bg-indigo-50 rounded-xl border border-indigo-100 fade-in">
              <h4 className="font-semibold text-indigo-900 mb-3">{service.detailedInfo.title}</h4>
              <div className="text-sm text-indigo-800 whitespace-pre-line leading-relaxed">
                {service.detailedInfo.content}
              </div>
            </div>
          )}
          
          {/* Cartes des niveaux */}
          {!isDisabled && (
            <>
              <div className="grid md:grid-cols-3 gap-4">
                {service.levels.map((level, idx) => (
                  <LevelCard
                    key={idx}
                    level={level}
                    isSelected={selection === idx}
                    onSelect={() => onSelect(service.id, idx)}
                    disabled={isDisabled}
                  />
                ))}
              </div>
              
              {selection === null && (
                <p className="mt-4 text-sm text-gray-400 text-center">
                  Cliquez sur un niveau pour l'ajouter √† votre devis
                </p>
              )}
            </>
          )}
          
          {/* Message quand d√©sactiv√© */}
          {isDisabled && (
            <div className="py-8 text-center">
              <p className="text-gray-500">Ce service n'est pas inclus dans votre devis</p>
              <p className="text-sm text-gray-400 mt-1">Cliquez sur "R√©activer" pour l'ajouter</p>
            </div>
          )}
        </div>
      );
    }

    // Composant principal
    function SEOCalculator() {
      // null = pas s√©lectionn√©, number = niveau s√©lectionn√©
      const [selections, setSelections] = useState({ audit: null, corrections: null, pages: null, contenu: null, suivi: null });
      // Services d√©sactiv√©s via "Non merci"
      const [disabledServices, setDisabledServices] = useState({ audit: false, corrections: false, pages: false, contenu: false, suivi: false });
      const [setupSelections, setSetupSelections] = useState({ tracking: false, dashboard: false });
      const [duration, setDuration] = useState(4);
      const [showResult, setShowResult] = useState(false);
      const [contactInfo, setContactInfo] = useState({ name: '', email: '', company: '' });
      const [formSubmitted, setFormSubmitted] = useState(false);

      const handleSelect = (serviceId, levelIdx) => {
        setSelections(prev => ({ ...prev, [serviceId]: prev[serviceId] === levelIdx ? null : levelIdx }));
      };

      const handleDisable = (serviceId) => {
        setDisabledServices(prev => {
          const newDisabled = !prev[serviceId];
          // Si on d√©sactive, on enl√®ve aussi la s√©lection
          if (newDisabled) {
            setSelections(prevSel => ({ ...prevSel, [serviceId]: null }));
          }
          return { ...prev, [serviceId]: newDisabled };
        });
      };

      const toggleSetup = (id) => {
        setSetupSelections(prev => ({ ...prev, [id]: !prev[id] }));
      };

      // Calcul du total (exclut les services d√©sactiv√©s)
      const { monthlyTotal, setupTotal, selectedServices, discount } = useMemo(() => {
        let monthly = 0;
        let setup = 0;
        const selected = [];

        services.forEach(service => {
          const levelIdx = selections[service.id];
          const isDisabled = disabledServices[service.id];
          if (levelIdx !== null && !isDisabled) {
            const level = service.levels[levelIdx];
            monthly += level.price;
            selected.push({ service: service.title, level: level.name, price: level.price, features: level.features });
          }
        });

        setupOptions.forEach(opt => {
          if (setupSelections[opt.id]) setup += opt.price;
        });

        const discountRate = duration === 6 ? 0.05 : 0;
        const discountAmount = monthly * duration * discountRate;

        return { monthlyTotal: monthly, setupTotal: setup, selectedServices: selected, discount: discountAmount };
      }, [selections, setupSelections, duration, disabledServices]);

      // Prix mensuel effectif (avec remise r√©partie si 6 mois)
      const effectiveMonthlyPrice = duration === 6 
        ? Math.round(monthlyTotal * 0.95) 
        : monthlyTotal;

      const grandTotal = (monthlyTotal * duration) + setupTotal - discount;
      const hasSelections = Object.values(selections).some((v, i) => v !== null && !disabledServices[Object.keys(selections)[i]]);

      const handleSubmit = async (e) => {
        e.preventDefault();
        
        // Pr√©parer les donn√©es pour le webhook
        const servicesText = selectedServices.map(s => `${s.service} (${s.level})`).join(', ');
        const setupText = [
          setupSelections.tracking ? 'Tracking (750‚Ç¨)' : null,
          setupSelections.dashboard ? 'Dashboard (500‚Ç¨)' : null
        ].filter(Boolean).join(', ') || 'Aucun';
        
        const payload = {
          name: contactInfo.name,
          email: contactInfo.email,
          company: contactInfo.company || '',
          services: servicesText,
          setup: setupText,
          duration: duration,
          monthlyPrice: Math.round(grandTotal / duration),
          grandTotal: grandTotal
        };

        try {
          // Envoyer vers N8N webhook
          const response = await fetch('https://n8n.mydigipal.com/webhook/calculateur-seo', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          
          if (response.ok) {
            setFormSubmitted(true);
          } else {
            alert('Erreur lors de l\'envoi. Veuillez r√©essayer.');
          }
        } catch (error) {
          console.error('Erreur:', error);
          alert('Erreur de connexion. Veuillez r√©essayer.');
        }
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
          {/* Header */}
          <header className="bg-white border-b border-gray-100 sticky top-0 z-50">
            <div className="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <img src="data:image/webp;base64,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" alt="MyDigipal" className="h-10 w-auto" id="logo" />
                <div className="border-l border-gray-200 pl-3">
                  <p className="text-sm font-medium text-gray-700">Simulateur de Management SEO</p>
                </div>
              </div>
              
              {hasSelections && (
                <div className="hidden md:flex items-center gap-4">
                  <div className="text-right">
                    <p className="text-sm text-gray-500">Estimation mensuelle</p>
                    <p className="text-xl font-bold text-indigo-600">{effectiveMonthlyPrice}‚Ç¨/mois</p>
                  </div>
                  <button onClick={() => setShowResult(true)} className="px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition flex items-center gap-2">
                    Voir le r√©capitulatif <ArrowRightIcon />
                  </button>
                </div>
              )}
            </div>
          </header>

          <main className="max-w-6xl mx-auto px-4 py-8">
            {/* Intro */}
            <section className="text-center mb-12">
              <div className="inline-flex items-center gap-2 px-4 py-2 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium mb-4">
                <SparklesIcon /> Offre modulaire sur-mesure
              </div>
              <h2 className="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Composez votre offre SEO</h2>
              <p className="text-lg text-gray-600 max-w-2xl mx-auto">
                S√©lectionnez le niveau adapt√© pour chaque service ou cliquez sur "Non merci" pour les modules qui ne vous int√©ressent pas.
              </p>
            </section>

            {/* Services */}
            {services.map(service => (
              <ServiceSection 
                key={service.id} 
                service={service} 
                selection={selections[service.id]} 
                onSelect={handleSelect}
                onDisable={handleDisable}
                isDisabled={disabledServices[service.id]}
              />
            ))}

            {/* Setup Options */}
            <div className="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6 fade-in">
              <div className="flex items-center gap-3 mb-3">
                <span className="text-3xl">‚öôÔ∏è</span>
                <h3 className="text-xl font-bold text-gray-900">Setup One-Off (optionnel)</h3>
              </div>
              <p className="text-gray-600 mb-6">Des prestations ponctuelles pour poser les fondations de votre tracking.</p>
              
              <div className="grid md:grid-cols-2 gap-4">
                {setupOptions.map(opt => (
                  <div key={opt.id} onClick={() => toggleSetup(opt.id)} className={`p-4 rounded-xl border-2 cursor-pointer transition-all ${setupSelections[opt.id] ? 'border-green-500 bg-green-50 ring-2 ring-green-500' : 'border-gray-200 hover:border-gray-300'}`}>
                    <div className="flex items-center justify-between mb-2">
                      <h4 className="font-semibold text-gray-900">{opt.name}</h4>
                      <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${setupSelections[opt.id] ? 'bg-green-500 border-green-500 text-white' : 'border-gray-300'}`}>
                        {setupSelections[opt.id] && <CheckIcon />}
                      </div>
                    </div>
                    <p className="text-sm text-gray-600 mb-2">{opt.description}</p>
                    <p className="text-lg font-bold text-gray-900">{opt.price}‚Ç¨ <span className="text-sm font-normal text-gray-500">(une fois)</span></p>
                  </div>
                ))}
              </div>
            </div>

            {/* Duration */}
            <div className="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6 fade-in">
              <div className="flex items-center gap-3 mb-3">
                <span className="text-3xl">üìÖ</span>
                <h3 className="text-xl font-bold text-gray-900">Dur√©e d'engagement</h3>
              </div>
              
              <div className="grid md:grid-cols-2 gap-4">
                {[4, 6].map(d => (
                  <div key={d} onClick={() => setDuration(d)} className={`p-4 rounded-xl border-2 cursor-pointer transition-all ${duration === d ? 'border-indigo-500 bg-indigo-50 ring-2 ring-indigo-500' : 'border-gray-200 hover:border-gray-300'}`}>
                    <div className="flex items-center justify-between">
                      <div>
                        <h4 className="font-semibold text-gray-900">{d} mois</h4>
                        <p className="text-sm text-gray-600">{d === 4 ? 'Engagement minimum' : '5% de remise sur la p√©riode'}</p>
                      </div>
                      <div className="flex items-center gap-2">
                        {d === 6 && <span className="px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full">-5%</span>}
                        {duration === d && <div className="w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center text-white"><CheckIcon /></div>}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Mobile Summary Bar */}
            {hasSelections && (
              <div className="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg z-40">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-gray-500">Total mensuel</p>
                    <p className="text-xl font-bold text-indigo-600">{effectiveMonthlyPrice}‚Ç¨/mois</p>
                  </div>
                  <button onClick={() => setShowResult(true)} className="px-4 py-3 bg-indigo-600 text-white rounded-lg font-medium">
                    Voir le r√©capitulatif
                  </button>
                </div>
              </div>
            )}

            {/* Desktop Summary */}
            {hasSelections && (
              <div className="hidden md:block bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 text-white fade-in">
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="text-xl font-bold mb-1">Votre estimation</h3>
                    <p className="text-indigo-200">{selectedServices.length} service{selectedServices.length > 1 ? 's' : ''} s√©lectionn√©{selectedServices.length > 1 ? 's' : ''}</p>
                  </div>
                  
                  <div className="text-right">
                    <p className="text-indigo-200 text-sm">Total sur {duration} mois</p>
                    <p className="text-3xl font-bold">
                      {grandTotal.toLocaleString()}‚Ç¨
                      {discount > 0 && <span className="text-sm font-normal text-green-300 ml-2">(-{discount.toLocaleString()}‚Ç¨)</span>}
                    </p>
                    <p className="text-indigo-200">soit {effectiveMonthlyPrice}‚Ç¨/mois</p>
                  </div>
                  
                  <button onClick={() => setShowResult(true)} className="px-6 py-3 bg-white text-indigo-600 rounded-xl font-semibold hover:bg-indigo-50 transition flex items-center gap-2">
                    Voir le d√©tail <ChevronRightIcon />
                  </button>
                </div>
              </div>
            )}
          </main>

          {/* Modal R√©capitulatif */}
          {showResult && (
            <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto">
              <div className="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto fade-in">
                <div className="sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between">
                  <h3 className="text-xl font-bold text-gray-900">Votre devis personnalis√©</h3>
                  <button onClick={() => setShowResult(false)} className="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
                </div>
                
                <div className="p-6">
                  {selectedServices.length === 0 ? (
                    <p className="text-gray-500 text-center py-8">Aucun service s√©lectionn√©.</p>
                  ) : (
                    <>
                      {/* Services s√©lectionn√©s */}
                      <div className="space-y-4 mb-6">
                        {selectedServices.map((item, idx) => (
                          <div key={idx} className="p-4 bg-gray-50 rounded-xl">
                            <div className="flex items-center justify-between mb-2">
                              <div>
                                <h4 className="font-semibold text-gray-900">{item.service}</h4>
                                <span className="text-sm text-indigo-600 font-medium">Niveau {item.level}</span>
                              </div>
                              <span className="text-lg font-bold text-gray-900">{item.price}‚Ç¨/mois</span>
                            </div>
                            <ul className="text-sm text-gray-600">
                              {item.features.map((f, i) => (
                                <li key={i} className="flex items-center gap-2">
                                  <span className="text-green-500"><CheckIcon /></span> {f}
                                </li>
                              ))}
                            </ul>
                          </div>
                        ))}
                        
                        {/* Setup */}
                        {(setupSelections.tracking || setupSelections.dashboard) && (
                          <div className="p-4 bg-amber-50 rounded-xl">
                            <h4 className="font-semibold text-gray-900 mb-2">Setup One-Off</h4>
                            {setupSelections.tracking && <div className="flex justify-between text-sm"><span>Tracking & Measurement Setup</span><span className="font-medium">750‚Ç¨</span></div>}
                            {setupSelections.dashboard && <div className="flex justify-between text-sm"><span>Dashboard Looker Studio</span><span className="font-medium">500‚Ç¨</span></div>}
                          </div>
                        )}
                      </div>

                      {/* Total avec prix mensuel selon dur√©e */}
                      <div className="border-t border-gray-200 pt-4 mb-6">
                        <div className="flex justify-between mb-2">
                          <span className="text-gray-600">Dur√©e d'engagement</span>
                          <span className="font-semibold">{duration} mois</span>
                        </div>
                        {setupTotal > 0 && (
                          <div className="flex justify-between mb-2">
                            <span className="text-gray-600">Setup one-off</span>
                            <span className="font-semibold">{setupTotal}‚Ç¨</span>
                          </div>
                        )}
                        {discount > 0 && (
                          <div className="flex justify-between mb-2 text-green-600">
                            <span>Remise engagement 6 mois (-5%)</span>
                            <span className="font-semibold">-{discount.toLocaleString()}‚Ç¨</span>
                          </div>
                        )}
                        <div className="bg-indigo-50 rounded-xl p-4 mt-4">
                          <div className="flex justify-between items-center">
                            <span className="text-lg font-bold text-gray-900">Total</span>
                            <div className="text-right">
                              <span className="text-2xl font-bold text-indigo-600">{grandTotal.toLocaleString()}‚Ç¨</span>
                              <p className="text-sm text-gray-600">soit <span className="font-semibold text-indigo-600">{Math.round(grandTotal / duration)}‚Ç¨/mois</span></p>
                            </div>
                          </div>
                        </div>
                      </div>

                      {/* Les + MyDigipal */}
                      <div className="bg-indigo-50 rounded-xl p-4 mb-6">
                        <h4 className="font-semibold text-indigo-900 mb-2 flex items-center gap-2"><SparklesIcon /> Inclus dans tous nos services</h4>
                        <ul className="text-sm text-indigo-800 space-y-1">
                          <li>‚úì Optimisation LLM (ChatGPT, Perplexity, Copilot)</li>
                          <li>‚úì Outils premium (Ahrefs, Search Console)</li>
                          <li>‚úì Approche 100% data-driven</li>
                          <li>‚úì Transparence totale sur les actions</li>
                        </ul>
                      </div>

                      {/* Contact Form */}
                      <div className="border-t border-gray-200 pt-6">
                        {formSubmitted ? (
                          <div className="text-center py-8">
                            <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                              <span className="text-green-500 text-2xl">‚úì</span>
                            </div>
                            <h4 className="text-xl font-bold text-gray-900 mb-2">Merci !</h4>
                            <p className="text-gray-600">Nous vous recontacterons sous 24h.</p>
                          </div>
                        ) : (
                          <>
                            <h4 className="font-semibold text-gray-900 mb-4">Recevoir ce devis par email</h4>
                            <form onSubmit={handleSubmit} className="space-y-3">
                              <input type="text" placeholder="Votre nom" value={contactInfo.name} onChange={(e) => setContactInfo(prev => ({ ...prev, name: e.target.value }))} required className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none" />
                              <input type="email" placeholder="Votre email" value={contactInfo.email} onChange={(e) => setContactInfo(prev => ({ ...prev, email: e.target.value }))} required className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none" />
                              <input type="text" placeholder="Votre entreprise (optionnel)" value={contactInfo.company} onChange={(e) => setContactInfo(prev => ({ ...prev, company: e.target.value }))} className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none" />
                              <button type="submit" className="w-full px-4 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center gap-2">
                                <MailIcon /> Envoyer le devis
                              </button>
                            </form>
                            <p className="text-xs text-gray-500 mt-3 text-center">Nous vous recontacterons sous 24h.</p>
                          </>
                        )}
                      </div>
                    </>
                  )}
                </div>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer className="bg-white border-t border-gray-100 py-8 mt-12 mb-20 md:mb-0">
            <div className="max-w-6xl mx-auto px-4 text-center">
              <p className="text-gray-600 mb-2">Des questions ?</p>
              <a href="mailto:paul@mydigipal.com" className="text-indigo-600 font-semibold hover:underline">paul@mydigipal.com</a>
            </div>
          </footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<SEOCalculator />);
  </script>
</body>
</html>
